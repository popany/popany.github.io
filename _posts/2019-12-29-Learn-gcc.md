---
layout: post
title: Learn gcc
---

[Telling gcc directly to link a library statically](https://stackoverflow.com/questions/6578484/telling-gcc-directly-to-link-a-library-statically)

It is possible of course, use `-l`: instead of `-l`. For example `-l:libXYZ.a` to link with `libXYZ.a`. Notice the lib written out, as opposed to `-lXYZ` which would auto expand to `libXYZ`.

## [Options for Linking](https://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)

`-llibrary`
`-l library`

Search the library named library when linking. (The second alternative with the library as a separate argument is only for POSIX compliance and is not recommended.)  
The -l option is passed directly to the linker by GCC. Refer to your linker documentation for exact details. The general description below applies to the GNU linker.  
The linker searches a standard list of directories for the library. The directories searched include several standard system directories plus any that you specify with `-L`.  
Static libraries are archives of object files, and have file names like `liblibrary.a`. Some targets also support shared libraries, which typically have names like `liblibrary.so`. If both static and shared libraries are found, the **linker gives preference to linking with the shared library** unless the `-static` option is used.  
It makes a difference where in the command you write this option; the linker searches and processes libraries and object files in the **order** they are specified. Thus, ‘`foo.o -lz bar.o`’ searches library ‘`z`’ after file `foo.o` but before `bar.o`. If bar.o refers to functions in ‘`z`’, those functions may not be loaded.

`-static`

On systems that support dynamic linking, this overrides `-pie` and **prevents linking with the shared libraries**. On other systems, this option has no effect. 

`-shared`

Produce a shared object which can then be linked with other objects to form an executable. Not all systems support this option. For predictable results, you must also specify the same set of options used for compilation (`-fpic`, `-fPIC`, or model suboptions) when you specify this linker option.
